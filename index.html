<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Acopiara Calistenia ‚Äî Cronograma</title>
    <meta name="description" content="Painel simples de cronograma de calistenia. Salva no localStorage e pronto para GitHub Pages." />

    <!-- Favicon -->
    <link rel="icon" href="assets/images/dumbell.png" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      textarea { font-family: inherit; }
    </style>
  </head>
  <body class="antialiased bg-slate-900 text-slate-100">
    <div id="root"></div>

    <!-- React + ReactDOM (SEM JSX, compat√≠vel com GitHub Pages) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBWh9FOM2VHkenakxccSauyPkcBXSMZ-AQ",
    authDomain: "acopiara-calistenia.firebaseapp.com",
    projectId: "acopiara-calistenia",
    storageBucket: "acopiara-calistenia.firebasestorage.app",
    messagingSenderId: "78878692910",
    appId: "1:78878692910:web:5a334cf12e7b84be5f71bf"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
</script>
    <script>
      const { useState, useEffect, createElement: h } = React;

      function App() {
        const users = ['Erick', 'Gabriel', 'Brendo', 'Jonas', 'Leonardo'];
        const days = ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta'];

        const [showInfo, setShowInfo] = useState(true);

        const [schedule, setSchedule] = useState(() => {
          const saved = localStorage.getItem('calistenia_data');
          let data = {};
          if (saved) {
            try { data = JSON.parse(saved); } catch (e) {}
          }
          users.forEach(u => {
            data[u] = data[u] || {};
            days.forEach(d => {
              if (!data[u][d]) data[u][d] = { text: '', status: 'none' };
            });
          });
          return data;
        });

        useEffect(() => {
          localStorage.setItem('calistenia_data', JSON.stringify(schedule));
        }, [schedule]);

        const updateText = (u, d, v) => {
          setSchedule(s => ({ ...s, [u]: { ...s[u], [d]: { ...s[u][d], text: v } } }));
        };

        const toggleStatus = (u, d, st) => {
          setSchedule(s => ({
            ...s,
            [u]: {
              ...s[u],
              [d]: { ...s[u][d], status: s[u][d].status === st ? 'none' : st }
            }
          }));
        };

        const clearAll = () => {
          if (!confirm('Tem certeza que deseja limpar toda a planilha?')) return;
          const empty = {};
          users.forEach(u => {
            empty[u] = {};
            days.forEach(d => empty[u][d] = { text: '', status: 'none' });
          });
          setSchedule(empty);
        };

        const exportWeek = () => {
          let text = 'Cronograma de Calistenia ‚Äî Semana\n\n';
          users.forEach(u => {
            text += u + '\n';
            days.forEach(d => {
              const cell = schedule[u][d];
              const st = cell.status === 'completed' ? 'OK' : cell.status === 'partial' ? 'Parcial' : cell.status === 'missed' ? 'Faltou' : '-';
              text += `  ${d}: ${cell.text || 'Descanso'} (${st})\n`;
            });
            text += '\n';
          });
          const blob = new Blob([text], { type: 'text/plain' });
          const a = document.createElement('a');
          a.href = URL.createObjectURL(blob);
          a.download = 'cronograma_calistenia.txt';
          a.click();
        };

        const getStatusClass = (status) => {
          if (status === 'completed') return 'bg-emerald-900/30';
          if (status === 'partial') return 'bg-yellow-900/30';
          if (status === 'missed') return 'bg-red-900/30';
          return '';
        };

        return h('div', { className: 'min-h-screen p-4 max-w-7xl mx-auto space-y-6' },

          /* HEADER */
          h('header', { className: 'flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-slate-700 pb-6' },
            h('div', { className: 'flex items-center gap-3' },
              h('img', { src: 'assets/images/dumbell.png', className: 'w-12 h-12 object-contain' }),
              h('div', null,
                h('h1', { className: 'text-2xl font-bold tracking-tight' }, 'Acopiara Calistenia'),
                h('p', { className: 'text-slate-400 text-sm' }, 'Painel de Controle de Treinos')
              )
            ),
            h('div', { className: 'flex gap-2' },
              h('button', { onClick: exportWeek, className: 'px-3 py-2 rounded-lg bg-emerald-700 hover:bg-emerald-600 text-sm' }, 'Exportar Semana'),
              h('button', { onClick: clearAll, className: 'px-3 py-2 rounded-lg bg-red-900/40 hover:bg-red-900/60 text-red-300 text-sm' }, 'Limpar Tudo')
            )
          ),

          /* INFO */
          h('div', null,
            h('button', { onClick: () => setShowInfo(!showInfo), className: 'text-sm text-emerald-400 mb-2' }, showInfo ? 'Ocultar instru√ß√µes' : 'Mostrar instru√ß√µes'),
            showInfo && h('div', { className: 'bg-slate-800/60 border border-slate-700 rounded-lg p-4 text-sm text-slate-300' },
              'Marque os treinos conclu√≠dos, incompletos ou faltantes. O progresso semanal ajuda a manter a consist√™ncia.'
            )
          ),

          /* DECOR */
          h('img', { src: 'assets/images/dumbell.png', className: 'w-40 opacity-20 mx-auto' }),

          /* TABLE */
          h('div', { className: 'overflow-x-auto rounded-xl border border-slate-700 shadow-2xl shadow-black/50' },
            h('table', { className: 'w-full min-w-[800px] border-collapse' },
              h('thead', null,
                h('tr', { className: 'bg-slate-800 text-slate-400 text-xs uppercase' },
                  h('th', { className: 'p-3 border border-slate-700' }, 'Atleta'),
                  ...days.map(d => h('th', { key: d, className: 'p-3 border border-slate-700' }, d))
                )
              ),
              h('tbody', null,
                users.map(u => {
                  const completedCount = days.filter(d => schedule[u][d].status === 'completed').length;
                  return h('tr', { key: u, className: 'border-b border-slate-700' },
                    h('td', { className: 'p-3 text-emerald-400 font-medium align-top' },
                      h('div', null, u),
                      h('div', { className: 'text-xs text-slate-400 mt-1' }, `${completedCount}/${days.length} conclu√≠dos`)
                    ),
                    ...days.map(d => h('td', { key: d, className: `p-2 ${getStatusClass(schedule[u][d].status)}` },
                      h('textarea', {
                        className: 'w-full h-20 bg-transparent resize-none rounded p-2 text-sm border border-slate-700 focus:ring-1 focus:ring-emerald-500 outline-none',
                        value: schedule[u][d].text,
                        placeholder: 'Insira o treino...',
                        onChange: e => updateText(u, d, e.target.value)
                      }),
                      h('div', { className: 'flex gap-1 justify-end mt-1' },
                        h('button', { onClick: () => toggleStatus(u, d, 'completed') }, '‚úÖ'),
                        h('button', { onClick: () => toggleStatus(u, d, 'partial') }, '‚ö†Ô∏è'),
                        h('button', { onClick: () => toggleStatus(u, d, 'missed') }, '‚ùå')
                      )
                    ))
                  );
                })
              )
            )
          ),

          /* FOOTER */
          h('footer', { className: 'text-center text-slate-500 text-sm py-6' }, 'Mantenham a consist√™ncia. O resultado vem com o tempo. üî•')
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(h(App));
    </script>
  </body>
</html>

