<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Acopiara Calistenia ‚Äî Cronograma</title>
    <meta name="description" content="Painel simples de cronograma de calistenia. Salva no localStorage e pronto para GitHub Pages." />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      textarea { font-family: inherit; }
    </style>
  </head>
  <body class="antialiased bg-slate-900 text-slate-100">
    <div id="root"></div>

    <!-- React + ReactDOM (SEM JSX, compat√≠vel com GitHub Pages) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script>
      const { useState, useEffect, createElement: h } = React;

      function App() {
        const users = ['Erick', 'Gabriel', 'Brendo', 'Jonas', 'Leonardo'];
        const days = ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta'];

        const [schedule, setSchedule] = useState(() => {
          const saved = localStorage.getItem('calistenia_data');
          let data = {};
          if (saved) {
            try { data = JSON.parse(saved); } catch (e) {}
          }
          users.forEach(u => {
            data[u] = data[u] || {};
            days.forEach(d => {
              if (!data[u][d]) data[u][d] = { text: '', status: 'none' };
            });
          });
          return data;
        });

        useEffect(() => {
          localStorage.setItem('calistenia_data', JSON.stringify(schedule));
        }, [schedule]);

        const updateText = (u, d, v) => {
          setSchedule(s => ({ ...s, [u]: { ...s[u], [d]: { ...s[u][d], text: v } } }));
        };

        const toggleStatus = (u, d, st) => {
          setSchedule(s => ({
            ...s,
            [u]: {
              ...s[u],
              [d]: { ...s[u][d], status: s[u][d].status === st ? 'none' : st }
            }
          }));
        };

        const clearAll = () => {
          if (!confirm('Tem certeza que deseja limpar toda a planilha?')) return;
          const empty = {};
          users.forEach(u => {
            empty[u] = {};
            days.forEach(d => empty[u][d] = { text: '', status: 'none' });
          });
          setSchedule(empty);
        };

        return h('div', { className: 'min-h-screen p-4 max-w-7xl mx-auto space-y-6' },

          /* HEADER */
          h('header', { className: 'flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-slate-700 pb-6' },
            h('div', { className: 'flex items-center gap-3' },
              h('img', {
                src: 'assets/images/dumbell.png',
                alt: '√çcone de halter',
                className: 'w-12 h-12 object-contain'
              }),
              h('div', null,
                h('h1', { className: 'text-2xl font-bold tracking-tight' }, 'Acopiara Calistenia'),
                h('p', { className: 'text-slate-400 text-sm' }, 'Painel de Controle de Treinos')
              )
            ),

            h('button', {
              onClick: clearAll,
              className: 'px-4 py-2 rounded-lg bg-red-900/30 hover:bg-red-900/50 text-red-400 text-sm border border-red-900/30'
            }, 'Limpar Tudo')
          ),

          /* IMAGEM DECORATIVA */
          h('img', {
            src: 'assets/images/dumbell.png',
            alt: 'Ilustra√ß√£o decorativa',
            className: 'w-40 opacity-20 mx-auto'
          }),

          /* TABELA */
          h('div', { className: 'overflow-x-auto rounded-xl border border-slate-700 shadow-2xl shadow-black/50' },
            h('table', { className: 'w-full min-w-[800px] border-collapse' },
              h('thead', null,
                h('tr', { className: 'bg-slate-800 text-slate-400 text-xs uppercase' },
                  h('th', { className: 'p-3 border border-slate-700' }, 'Atleta'),
                  ...days.map(d => h('th', { key: d, className: 'p-3 border border-slate-700' }, d))
                )
              ),
              h('tbody', null,
                users.map(u => h('tr', { key: u, className: 'border-b border-slate-700' },
                  h('td', { className: 'p-3 text-emerald-400 font-medium' }, u),
                  ...days.map(d => h('td', { key: d, className: 'p-2' },
                    h('textarea', {
                      className: 'w-full h-20 bg-transparent resize-none rounded p-2 text-sm border border-slate-700 focus:ring-1 focus:ring-emerald-500 outline-none',
                      value: schedule[u][d].text,
                      placeholder: 'Insira o treino...',
                      onChange: e => updateText(u, d, e.target.value)
                    }),
                    h('div', { className: 'flex gap-1 justify-end mt-1' },
                      h('button', { onClick: () => toggleStatus(u, d, 'completed') }, '‚úÖ'),
                      h('button', { onClick: () => toggleStatus(u, d, 'partial') }, '‚ö†Ô∏è'),
                      h('button', { onClick: () => toggleStatus(u, d, 'missed') }, '‚ùå')
                    )
                  ))
                ))
              )
            )
          ),

          /* FOOTER */
          h('footer', { className: 'text-center text-slate-500 text-sm py-6' }, 'Mantenham a consist√™ncia. O resultado vem com o tempo. üî•')
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(h(App));
    </script>
  </body>
</html>
